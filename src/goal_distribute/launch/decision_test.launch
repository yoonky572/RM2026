<?xml version="1.0"?>
<launch>
    <!-- 
        决策测试启动文件
        用于启动决策测试服务器和Web前端桥接服务
        访问前端界面: http://localhost:8080
    -->
    
    <!-- 决策测试服务器节点 -->
    <!-- 提供ROS服务接口: /goal_distribute/decision_test -->
    <node name="decision_test_server" pkg="goal_distribute" type="decision_test_server" output="screen">
        <!-- 加载JSON规则配置（如果存在） -->
        <param name="json_rules_file" value="$(find goal_distribute)/config/decision_rules.json" />

        <!-- 固定策略→目标点ID需要的目标点表 -->
        <param name="goal_num" type="int" value="11" />

        <!-- 红方目标点：编号必须与策略表保持一致 -->
        <rosparam param="red_goal0">  [ 0.5, -2.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- SUPPLY_RETURN -->
        <rosparam param="red_goal1">  [ 0.5, -1.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- SUPPLY_GUARD -->
        <rosparam param="red_goal2">  [ 6.0,  2.0, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- ATTACK_ENEMY_BASE -->
        <rosparam param="red_goal3">  [ 5.0,  3.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- ATTACK_ENEMY_OUTPOST -->
        <rosparam param="red_goal4">  [ 3.5,  1.0, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- AGGRESSIVE_AIM -->
        <rosparam param="red_goal5">  [ 1.5, -0.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- CONSERVATIVE_AIM -->
        <rosparam param="red_goal6">  [ 0.8, -0.8, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- DEFENSIVE -->
        <rosparam param="red_goal7">  [ 2.8,  1.8, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- AGGRESSIVE -->
        <rosparam param="red_goal8">  [ 2.0,  0.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- BALANCED -->
        <rosparam param="red_goal9">  [ 0.0, -3.0, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- RETREAT -->
        <rosparam param="red_goal10"> [ 1.5,  1.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>  <!-- REPOSITION -->

        <!-- 蓝方（镜像）配置，方便切换 team_color -->
        <rosparam param="blue_goal0">  [ -0.5,  2.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal1">  [ -0.5,  1.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal2">  [ -6.0, -2.0, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal3">  [ -5.0, -3.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal4">  [ -3.5, -1.0, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal5">  [ -1.5,  0.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal6">  [ -0.8,  0.8, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal7">  [ -2.8, -1.8, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal8">  [ -2.0, -0.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal9">  [ -0.0,  3.0, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
        <rosparam param="blue_goal10"> [ -1.5, -1.5, 0.0, 0.0, 0.0, 0.0, 1.0 ]</rosparam>
    </node>
    
    <!-- HTTP桥接服务器 -->
    <!-- 连接Web前端和ROS服务，监听端口8080 -->
    <node name="decision_test_bridge" pkg="goal_distribute" type="decision_test_bridge.py" output="screen">
        <param name="port" value="8080" />
        <param name="service_name" value="/goal_distribute/decision_test" />
    </node>
    
</launch>

